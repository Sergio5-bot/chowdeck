(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{7710:function(e,n,t){"use strict";t.d(n,{Z:function(){return G}});var s=t(5893),r=t(7294),a=t(8575),l=t(1344),i=t(3285),c=t(4051),o=t.n(c),u=t(1163),d=t(5846),m=t.n(d),f=t(8811),x=t(7971),h=t(5313),p=t(780),v=t(4414),j=t.n(v),b=function(e){var n=e.className,t=void 0===n?"":n,a=(0,u.useRouter)(),l=a.query,i=(0,r.useState)(l.q||""),c=i[0],o=i[1];return(0,r.useEffect)((function(){l.q&&o("".concat(l.q))}),[l.q]),(0,s.jsxs)("div",{className:"relative text-gray-600  ".concat(t),children:[(0,s.jsx)("span",{className:"absolute top-0.5 bottom-0 left-0 flex items-center pl-2",children:(0,s.jsx)("button",{type:"submit",className:"p-1 ml-4 md:ml-0 focus:outline-none focus:shadow-outline","aria-label":"Search",children:(0,s.jsx)(f.Bu,{size:16,color:"#0C513F"})})}),(0,s.jsx)("input",{type:"search",name:"q",className:"py-2 focus:ring-brandmain focus:border-brandmain ".concat(j().searchinput),placeholder:"Search Chowdeck...",value:c,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(a.query.q=c,a.push(a,null,{shallow:!0}))},onChange:function(e){var n=e.target.value;o(n),0===n.length&&(delete a.query.q,a.push(a,null,{shallow:!0}))}})]})},g=t(5057),N=t(9256),w=t(3451),y=t(9615),k=t(8550),P=t(4931),C=t(8767),O=t(8248),_=t(7376),E=t(5361),S=t(3780),Z=function(){var e=(0,S.Z)({apiKey:N.eu}),n=e.placesService,t=e.placePredictions,s=e.getPlacePredictions;return{onInputChange:function(e){s({input:e})},getPlaceDetails:function(e,t){return null===n||void 0===n?void 0:n.getDetails({placeId:e.place_id},(function(e){return null===t||void 0===t?void 0:t(e)}))},isPlacePredictionsLoading:e.isPlacePredictionsLoading,placePredictions:t}},I=t(4142),L=t(9542),z=function(e){var n=e.grabAddress,t=(0,r.useState)(!1),a=t[0],l=t[1],i=(0,r.useState)(""),c=i[0],o=i[1],u=(0,r.useRef)(null),d=Z(),m=d.getPlaceDetails,x=d.isPlacePredictionsLoading,h=d.onInputChange,p=d.placePredictions,v=function(e){var n;u&&(null===u||void 0===u||null===(n=u.current)||void 0===n?void 0:n.contains(e.target))||l(!1)};return(0,r.useEffect)((function(){p&&!(0,E.xbD)(p)&&l(!0)}),[p]),(0,r.useEffect)((function(){return document.addEventListener("click",v),function(){document.removeEventListener("click",v)}}),[]),(0,s.jsxs)("div",{ref:u,children:[(0,s.jsx)(L.Z,{Icon:f.$t,iconProps:{width:14,height:20,color:"#02C27F"},placeholder:"Enter a new address",className:"text-sm",value:c,onChange:function(e){var n=e.target.value;h(n),o(n)},rightElement:x&&(0,s.jsx)(I.Z,{className:"w-4 h-4"})}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsx)("div",{className:"bg-white shadow absolute flex flex-col left-0 top-0 w-full ".concat(a?"min-h-[200px]":""," max-h-[220px] overflow-y-auto z-20"),children:a&&p.map((function(e){return(0,s.jsx)("button",{className:"p-3 text-left hover:bg-gray-50",onClick:function(t){return function(e,t){e.stopPropagation(),l(!1),m(t,n),o(null===t||void 0===t?void 0:t.description)}(t,e)},children:e.description},e.place_id)}))})})]})},q=t(4011),M=function(){var e=(0,h.I0)(),n=(0,w.Z)().isMobile,t=(0,h.v9)(p.Jp).modalVisible,a=(0,O.Z)(),l=a.getLocation,i=a.location,c=(0,C.useMutation)({mutationFn:_.Ri.addCustomerLocations,onError:function(e){P.ZP.error(e.message)},onSuccess:function(n){e(g.hI.setLocation(n.data)),e(p.Ne.setLocation(n.data)),e(p.Ne.closeModal())}}),o=c.mutate,u=c.isLoading;return(0,r.useEffect)((function(){var e;return i||(e=setTimeout(l,2e3)),function(){return clearTimeout(e)}}),[i]),(0,s.jsx)(q.Z,{show:t,onClose:function(){return e(p.Ne.closeModal())},fullHeight:n,children:(0,s.jsxs)("div",{className:"px-4 py-6 md:min-h-[500px] md:p-8 relative",children:[(0,s.jsx)("p",{className:"md:mt-3 font-medium",children:"Delivery address"}),(0,s.jsx)("div",{className:"mt-8",children:(0,s.jsx)(z,{grabAddress:function(e){var n=(0,k.ud)(e);o(n)}})}),i&&(0,s.jsxs)("button",{className:"flex items-start -mt-1 border-b border-gray-100 w-full pb-3",onClick:function(){if(!i)return l();o(i)},children:[(0,s.jsx)(f.Y,{className:"mr-2 mt-1",size:15}),(0,s.jsxs)("span",{className:"flex-1 text-left",children:[(0,s.jsx)("span",{className:"block text-xs md:text-sm",children:"Use your current location"}),(0,s.jsx)("span",{className:"block text-gray-500 text-[10px] md:text-xs w-full mt-1 text-ellipsis",children:null===i||void 0===i?void 0:i.pretty_name})]})]}),u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"absolute inset-0 w-full h-full z-30 opacity-60 rounded-3xl bg-white"}),(0,s.jsx)("div",{className:"relative z-50 flex flex-col items-center justify-center",children:(0,s.jsx)(I.Z,{className:"inline-block "})})]})]})})},R=t(7516),B=t(3523),D=function(e){var n=e.children,t=e.trigger,l=e.className,i=(0,r.useState)(!1),c=i[0],o=i[1],u=(0,r.useRef)(null),d=function(e){var n;u&&(null===u||void 0===u||null===(n=u.current)||void 0===n?void 0:n.contains(e.target))||o(!1)};return(0,r.useEffect)((function(){return c&&document.addEventListener("click",d),function(){document.removeEventListener("click",d)}}),[c]),(0,s.jsxs)("div",{className:"relative",ref:u,children:[(0,s.jsx)("div",{onClick:function(){return o(!c)},children:t}),c&&(0,s.jsx)("div",{className:(0,a.m)("border bg-white rounded-lg border-brandmain absolute top-[110%] z-50 right-0 p-2 min-w-max",l),children:n})]})},F=t(707),U=t(3207);function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function T(e,n){if(null==e)return{};var t,s,r=function(e,n){if(null==e)return{};var t,s,r={},a=Object.keys(e);for(s=0;s<a.length;s++)t=a[s],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)t=a[s],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var V=function(e){var n=e.children,t=e.className,r=T(e,["children","className"]);return(0,s.jsx)("button",function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},s=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),s.forEach((function(n){A(e,n,t[n])}))}return e}({className:(0,a.m)("text-sm text-left py-2 px-3 flex items-center w-full hover:bg-[#e6f7f1]",t)},r,{children:n}))},J=function(){var e=(0,h.I0)(),n=(0,(0,B.Z)().getUser)(),t=(0,h.v9)(g.np).wallet,r=(0,w.Z)().isMobile,a=t?t.balance/100:null;return n?(0,s.jsx)(D,{className:"p-0 overflow-hidden",trigger:(0,s.jsx)(x.Z,{className:"w-[30px] h-[30px] md:w-[45px] md:h-[45px] shadow-indigo-500/40",Icon:f.n5,iconProps:{color:"#fff",size:r?18:22},"aria-label":"User Icon"}),children:(0,s.jsxs)("div",{className:"flex flex-col min-w-[200px]",children:[(0,s.jsx)(V,{className:"block",children:(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"w-[28px] h-[28px] flex items-center justify-center rounded-full bg-brandmain mr-2",children:(0,s.jsx)(f.n5,{color:"#fff",size:12})}),(0,s.jsxs)("span",{children:[(0,s.jsxs)("span",{className:"block font-medium text-sm",children:[n.first_name," ",n.last_name]}),Boolean(null===a||void 0===a?void 0:a.toString())&&(0,s.jsxs)("span",{className:"flex items-center mb-3",children:[(0,s.jsx)(f.w5,{size:14}),(0,s.jsxs)("span",{className:"text-xs ml-1",children:["\u20a6",(0,k.Aq)({number:a})]})]})]})]})}),(0,s.jsx)(V,{className:"",onClick:function(){return e(y.xZ.showOrderList(!0))},children:"My Orders"}),(0,s.jsx)(U.Z,{}),(0,s.jsxs)(V,{className:"text-brand-red hover:bg-red-100",onClick:function(){(0,g.kS)(e)},children:[(0,s.jsx)("span",{children:"Logout"}),(0,s.jsx)(R.XqV,{size:16,className:"ml-auto"})]})]})}):(0,s.jsx)(x.Z,{onClick:function(){return e(F.YV.openModal())},className:"w-[30px] h-[30px] md:w-[45px] md:h-[45px] shadow-indigo-500/40",Icon:f.n5,iconProps:{color:"#fff",size:r?18:22},"aria-label":"User Icon"})},K=t(1360),W=t(2937),Y=t(8769);function $(e,n,t,s,r,a,l){try{var i=e[a](l),c=i.value}catch(o){return void t(o)}i.done?n(c):Promise.resolve(c).then(s,r)}function H(e){return function(){var n=this,t=arguments;return new Promise((function(s,r){var a=e.apply(n,t);function l(e){$(a,s,r,l,i,"next",e)}function i(e){$(a,s,r,l,i,"throw",e)}l(void 0)}))}}var X=function(){var e=(0,u.useRouter)(),n=(0,h.v9)(g.np),t=n.wallet,a=n.selectedLocation,l=(0,h.v9)(y.Wf).showSearchBar,i=(0,h.v9)(K.iq).count,c=(0,W.b)().headerExtra,d=(0,h.I0)(),v=(0,w.Z)().isMobile,j=t?t.balance/100:null;(0,r.useEffect)((function(){!function(){C.apply(this,arguments)}()}),[]);var P=(0,r.useMemo)((function(){var e,n,t;return null===a||void 0===a||null===(e=a.pretty_name)||void 0===e||null===(n=e.split)||void 0===n||null===(t=n.call(e,","))||void 0===t?void 0:t[0]}),[a]);return(0,r.useEffect)((function(){var e=window.localStorage.getItem(N.I.location);e&&d(p.Ne.setLocation(JSON.parse(e)))}),[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"border-b border-[#f2f2f2] fixed w-full left-0 z-50 bg-white",children:[(0,s.jsxs)("div",{className:"w-full bg-white flex justify-between h-[75px] md:h-[81px] px-4 mx-auto  ".concat(m().navbar),children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("button",{className:"inline-block w-[59px]",onClick:function(){return e.push("/")},children:(0,s.jsx)(f.TR,{size:v?40:45})}),(0,s.jsxs)("span",{className:"flex items-center ml-2 md:ml-5",children:[(0,s.jsx)(f.$t,{color:"#02C27F",className:"mr-2"}),(0,s.jsxs)("button",{className:"flex text-xs w-fit items-center leading-none",onClick:function(){return d(p.Ne.openModal())},children:[P||"Enter address",(0,s.jsx)(f._M,{className:"ml-1 mt-0.5",width:7})]})]}),Boolean(null===j||void 0===j?void 0:j.toString())&&(0,s.jsxs)("span",{className:"hidden ml-6 md:flex items-center",children:[(0,s.jsx)(f.w5,{size:14}),(0,s.jsxs)("span",{className:"text-xs ml-1",children:["Wallet Balance (\u20a6",(0,k.Aq)({number:j}),")"]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-5",children:[(0,s.jsx)("div",{className:"hidden md:flex",children:c}),l&&(0,s.jsx)(b,{className:"hidden md:flex"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(x.Z,{className:"w-[30px] h-[30px] md:w-[45px] md:h-[45px] text-white shadow-indigo-500/40",Icon:R.ByR,count:"".concat(i),iconProps:{size:v?18:22},"aria-label":"Cart",onClick:function(){return d(K.Uw.setIsOpen(!0))}}),(0,s.jsx)(J,{})]})]})]}),(0,s.jsx)("div",{className:"md:hidden px-4 py-2",children:c}),l&&(0,s.jsx)(b,{className:"md:hidden w-full px-4 py-2 -mt-4 bg-white"})]}),(0,s.jsx)(M,{})]});function C(){return(C=H(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y.db.saveItems.toArray();case 2:n=e.sent,d(K.Uw.setCount(n.length));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},G=function(e){var n=e.children,t=e.className,r=e.noContainer,c=void 0!==r&&r;return(0,s.jsxs)("div",{className:(0,a.m)(t),children:[(0,s.jsx)(X,{}),(0,s.jsx)("div",{className:"pt-[81px] h-full",children:c?n:(0,s.jsx)(l.Z,{children:n})}),(0,s.jsx)(i.Z,{})]})}},5846:function(e){e.exports={navbar:"header_navbar__OoSFr",icon:"header_icon__lRw1_"}},4414:function(e){e.exports={searchinput:"SearchBar_searchinput__man5g"}}}]);